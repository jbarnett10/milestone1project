<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Evolution of HTTP – Quiz</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Quiz-specific styling (keeps your existing look) */

    .quiz-intro {
      margin-bottom: 20px;
    }

    .quiz-intro p {
      margin: 6px 0;
    }

    .quiz-meta {
      display: inline-block;
      background: #e0f2fe;
      border: 1px solid #93c5fd;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.9rem;
      color: #1d4ed8;
      margin-top: 6px;
    }

    .quiz-form fieldset {
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 14px 16px;
      margin: 0 0 14px 0;
      background: #ffffff;
    }

    .quiz-form legend {
      font-weight: 600;
      color: #1f2937;
      padding: 0 4px;
      font-size: 0.95rem;
    }

    .quiz-question {
      font-weight: 600;
      margin-bottom: 6px;
    }

    .quiz-helper {
      font-size: 0.85rem;
      color: #6b7280;
      margin-bottom: 8px;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.95rem;
    }

    .quiz-options label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .quiz-options input[type="radio"],
    .quiz-options input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: #1d4ed8;
    }

    .quiz-input {
      width: 100%;
      padding: 7px 9px;
      border-radius: 7px;
      border: 1px solid #d1d5db;
      font-size: 0.95rem;
    }

    .quiz-input:focus {
      outline: none;
      border-color: #1d4ed8;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.25);
    }

    .quiz-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.08s ease, box-shadow 0.15s ease;
    }

    .btn-primary {
      background: #1d4ed8;
      color: white;
      box-shadow: 0 2px 6px rgba(37, 99, 235, 0.35);
    }

    .btn-primary:hover {
      background: #1e40af;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #f3f4f6;
      color: #111827;
      border: 1px solid #d1d5db;
    }

    .btn-secondary:hover {
      background: #e5e7eb;
      transform: translateY(-1px);
    }

    .quiz-results {
      margin-top: 18px;
      padding: 14px 16px;
      border-radius: 10px;
      border: 1px dashed #cbd5e1;
      background: #f9fafb;
      display: none;
      font-size: 0.95rem;
    }

    .quiz-results h3 {
      margin-top: 0;
      margin-bottom: 8px;
    }

    .quiz-overall {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .quiz-overall.pass {
      color: #15803d;
    }

    .quiz-overall.fail {
      color: #b91c1c;
    }

    .quiz-score {
      color: #4b5563;
      margin-bottom: 10px;
    }

    .question-feedback {
      border-top: 1px solid #e5e7eb;
      padding-top: 8px;
      margin-top: 8px;
    }

    .question-feedback h4 {
      margin: 0 0 4px 0;
      font-size: 0.9rem;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      margin-bottom: 4px;
    }

    .badge.correct {
      background: #dcfce7;
      color: #166534;
    }

    .badge.incorrect {
      background: #fee2e2;
      color: #b91c1c;
    }

    .feedback-user {
      margin-bottom: 2px;
    }

    .feedback-user.correct {
      color: #166534;
      font-weight: 500;
    }

    .feedback-user.incorrect {
      color: #b91c1c;
      font-weight: 500;
    }

    .feedback-answer {
      color: #4b5563;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <!-- ===== Header and Site Navigation (same structure as other pages) ===== -->
  <header class="header">
    <h1 class="site-title">The Evolution of HTTP</h1>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="origins.html">Origins</a>
      <a href="http11.html">HTTP/1.1 &amp; HTTP/2</a>
      <a href="http3.html">HTTP/3 (QUIC)</a>
      <a href="concepts.html">Key Concepts</a>
      <a href="references.html">References</a>
      <a href="about.html">About</a>
      <a href="quiz.html">Quiz</a>
    </nav>
  </header>

  <!-- ===== Main Content Area ===== -->
  <main class="container">
    <article class="card">
      <section class="quiz-intro">
        <h2>HTTP Self-Assessment Quiz</h2>
        <p>
          This quiz helps you check your understanding of how HTTP evolved from early text-based requests
          to multiplexed, QUIC-powered HTTP/3. Answer the questions based on the content in this site.
        </p>
        <span class="quiz-meta">5 questions · pass = 4 / 5 (80%)</span>
      </section>

      <form id="quizForm" class="quiz-form">
        <!-- Q1: Fill in the blank -->
        <fieldset>
          <legend>Question 1 – Fill in the blank</legend>
          <p class="quiz-question">
            1. HTTP/3 runs over a transport protocol called <strong>_____</strong>, which is built on top of UDP and helps reduce head-of-line blocking.
          </p>
          <p class="quiz-helper">Type the protocol name only (no extra words).</p>
          <input
            type="text"
            id="q1"
            name="q1"
            class="quiz-input"
            autocomplete="off"
            placeholder="Your answer here"
          />
        </fieldset>

        <!-- Q2: Multiple choice -->
        <fieldset>
          <legend>Question 2 – Multiple choice</legend>
          <p class="quiz-question">2. HTTP is best described as:</p>
          <div class="quiz-options">
            <label>
              <input type="radio" name="q2" value="A" />
              <span>A. A link-layer protocol used for Ethernet frames</span>
            </label>
            <label>
              <input type="radio" name="q2" value="B" />
              <span>B. A stateless, application-layer protocol for client–server communication</span>
            </label>
            <label>
              <input type="radio" name="q2" value="C" />
              <span>C. A database query language</span>
            </label>
            <label>
              <input type="radio" name="q2" value="D" />
              <span>D. A hardware interface standard</span>
            </label>
          </div>
        </fieldset>

        <!-- Q3: Multiple choice -->
        <fieldset>
          <legend>Question 3 – Multiple choice</legend>
          <p class="quiz-question">
            3. Which HTTP version standardized <em>persistent connections</em> and
            <em>chunked transfer encoding</em>, becoming the webâs "workhorse" for many years?
          </p>
          <div class="quiz-options">
            <label>
              <input type="radio" name="q3" value="A" />
              <span>A. HTTP/0.9</span>
            </label>
            <label>
              <input type="radio" name="q3" value="B" />
              <span>B. HTTP/1.0</span>
            </label>
            <label>
              <input type="radio" name="q3" value="C" />
              <span>C. HTTP/1.1</span>
            </label>
            <label>
              <input type="radio" name="q3" value="D" />
              <span>D. HTTP/3</span>
            </label>
          </div>
        </fieldset>

        <!-- Q4: Multiple choice -->
        <fieldset>
          <legend>Question 4 – Multiple choice</legend>
          <p class="quiz-question">
            4. A key performance improvement of HTTP/2 over HTTP/1.1 is:
          </p>
          <div class="quiz-options">
            <label>
              <input type="radio" name="q4" value="A" />
              <span>A. It uses UDP instead of TCP</span>
            </label>
            <label>
              <input type="radio" name="q4" value="B" />
              <span>B. It introduces a binary framing layer that multiplexes many streams on a single TCP connection</span>
            </label>
            <label>
              <input type="radio" name="q4" value="C" />
              <span>C. It removes HTTP headers entirely</span>
            </label>
            <label>
              <input type="radio" name="q4" value="D" />
              <span>D. It only supports the GET method</span>
            </label>
          </div>
        </fieldset>

        <!-- Q5: Multi-select -->
        <fieldset>
          <legend>Question 5 – Multi-select (more than one correct answer)</legend>
          <p class="quiz-question">
            5. Which of the following statements about HTTP/3 and QUIC are <strong>true</strong>? Select all that apply.
          </p>
          <p class="quiz-helper">
            Hint: Think about UDP, head-of-line blocking, and connection setup.
          </p>
          <div class="quiz-options">
            <label>
              <input type="checkbox" name="q5" value="A" />
              <span>A. QUIC is built on top of UDP.</span>
            </label>
            <label>
              <input type="checkbox" name="q5" value="B" />
              <span>B. HTTP/3 avoids TCP head-of-line blocking by using independent QUIC streams.</span>
            </label>
            <label>
              <input type="checkbox" name="q5" value="C" />
              <span>C. HTTP/3 is never encrypted by default.</span>
            </label>
            <label>
              <input type="checkbox" name="q5" value="D" />
              <span>D. QUIC can support faster connection setup with 0-RTT / 1-RTT handshakes.</span>
            </label>
            <label>
              <input type="checkbox" name="q5" value="E" />
              <span>E. HTTP/3 removes HTTP methods like GET and POST.</span>
            </label>
          </div>
        </fieldset>

        <div class="quiz-actions">
          <button type="submit" class="btn btn-primary">Submit Quiz</button>
          <button type="button" class="btn btn-secondary" id="resetBtn">Reset / Retake</button>
        </div>
      </form>

      <div id="quizResults" class="quiz-results" aria-live="polite"></div>

      <p class="quiz-helper" style="margin-top: 14px;">
        Tip: If you miss a question, revisit pages like
        <a href="origins.html">Origins</a>,
        <a href="http11.html">HTTP/1.1 &amp; HTTP/2</a>, and
        <a href="http3.html">HTTP/3 (QUIC)</a> to review the material.
      </p>
    </article>
  </main>

  <footer class="footer">
    <p>This website was created as part of IT 3203 â <a href="https://ksuweb.github.io/IT3203/">Course Site</a>.</p>
  </footer>

  <!-- ===== Quiz Logic (JavaScript) ===== -->
  <script>
    const quizForm = document.getElementById('quizForm');
    const quizResults = document.getElementById('quizResults');
    const resetBtn = document.getElementById('resetBtn');

    const ANSWERS = {
      q1: 'quic',          // fill-in (case-insensitive)
      q2: 'B',
      q3: 'C',
      q4: 'B',
      q5: ['A', 'B', 'D']  // multi-select
    };

    const TOTAL = 5;
    const PASS_MARK = 0.8; // 80%

    quizForm.addEventListener('submit', function (e) {
      e.preventDefault();

      let score = 0;
      const feedbackBlocks = [];

      // Q1
      const q1Value = document.getElementById('q1').value.trim().toLowerCase();
      const q1Correct = q1Value === ANSWERS.q1;
      if (q1Correct) score++;

      feedbackBlocks.push(buildFeedback({
        number: 1,
        correct: q1Correct,
        userAnswer: q1Value || '(no answer entered)',
        correctAnswer: 'QUIC',
        explanation: 'HTTP/3 maps HTTP onto QUIC, a UDP-based transport that reduces head-of-line blocking.'
      }));

      // Q2
      const q2Value = getRadioValue('q2');
      const q2Correct = q2Value === ANSWERS.q2;
      if (q2Correct) score++;

      feedbackBlocks.push(buildFeedback({
        number: 2,
        correct: q2Correct,
        userAnswer: q2Value ? getOptionLabel('q2', q2Value) : '(no option selected)',
        correctAnswer: 'B. A stateless, application-layer protocol for client–server communication',
        explanation: 'HTTP defines how clients and servers exchange requests and responses over the web.'
      }));

      // Q3
      const q3Value = getRadioValue('q3');
      const q3Correct = q3Value === ANSWERS.q3;
      if (q3Correct) score++;

      feedbackBlocks.push(buildFeedback({
        number: 3,
        correct: q3Correct,
        userAnswer: q3Value ? getOptionLabel('q3', q3Value) : '(no option selected)',
        correctAnswer: 'C. HTTP/1.1',
        explanation: 'HTTP/1.1 introduced persistent connections and chunked transfer encoding.' 
      }));

      // Q4
      const q4Value = getRadioValue('q4');
      const q4Correct = q4Value === ANSWERS.q4;
      if (q4Correct) score++;

      feedbackBlocks.push(buildFeedback({
        number: 4,
        correct: q4Correct,
        userAnswer: q4Value ? getOptionLabel('q4', q4Value) : '(no option selected)',
        correctAnswer: 'B. Binary framing + multiplexed streams on a single TCP connection',
        explanation: 'HTTP/2 keeps HTTP semantics but adds a binary framing layer for multiplexing and header compression.'
      }));

      // Q5
      const q5Values = getCheckboxValues('q5');
      const q5Correct = arraysEqualIgnoreOrder(q5Values, ANSWERS.q5);
      if (q5Correct) score++;

      const userQ5Label = q5Values.length
        ? q5Values.map(v => getOptionLabel('q5', v)).join('; ')
        : '(no options selected)';

      const correctQ5Label = ANSWERS.q5
        .map(v => getOptionLabel('q5', v))
        .join('; ');

      feedbackBlocks.push(buildFeedback({
        number: 5,
        correct: q5Correct,
        userAnswer: userQ5Label,
        correctAnswer: correctQ5Label,
        explanation: 'HTTP/3 over QUIC uses UDP, avoids TCP head-of-line blocking, and supports faster 0-RTT/1-RTT setup.'
      }));

      const percentage = (score / TOTAL) * 100;
      const passed = (score / TOTAL) >= PASS_MARK;

      
      const overallHtml = `
        <div class="quiz-overall ${passed ? 'pass' : 'fail'}">
          ${passed ? '✅ You passed the quiz!' : '❌ You did not reach the pass mark yet.'}
        </div>
        <div class="quiz-score">
          Score: <strong>${score} / ${TOTAL}</strong> (${percentage.toFixed(0)}%) &nbsp;|&nbsp;
          Pass mark: ${Math.round(PASS_MARK * 100)}%
        </div>
      `;

      quizResults.innerHTML = `
        <h3>Quiz Results</h3>
        ${overallHtml}
        ${feedbackBlocks.join("")}
      `;
      quizResults.style.display = 'block';
      quizResults.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    resetBtn.addEventListener('click', function () {
      quizForm.reset();
      quizResults.innerHTML = '';
      quizResults.style.display = 'none';
    });

    function getRadioValue(name) {
      const inputs = document.querySelectorAll('input[name="' + name + '"]');
      for (const input of inputs) {
        if (input.checked) return input.value;
      }
      return null;
    }

    function getCheckboxValues(name) {
      const inputs = document.querySelectorAll('input[name="' + name + '"]:checked');
      return Array.from(inputs).map(i => i.value);
    }

    function arraysEqualIgnoreOrder(a, b) {
      if (a.length !== b.length) return false;
      const sortedA = [...a].sort();
      const sortedB = [...b].sort();
      return sortedA.every((v, i) => v === sortedB[i]);
    }

    function getOptionLabel(name, value) {
      const input = document.querySelector('input[name="' + name + '"][value="' + value + '"]');
      if (!input) return value;
      const label = input.closest('label');
      return label ? label.textContent.trim() : value;
    }

    function buildFeedback({ number, correct, userAnswer, correctAnswer, explanation }) {
      return `
        <div class="question-feedback">
          <h4>Question ${number}</h4>
          <div class="badge ${correct ? "correct" : "incorrect"}">
            ${correct ? "Correct" : "Incorrect"}
          </div>
          <div class="feedback-user ${correct ? "correct" : "incorrect"}">
            Your answer: ${userAnswer}
          </div>
          <div class="feedback-answer">
            <strong>Correct answer:</strong> ${correctAnswer}<br />
            ${explanation}
          </div>
        </div>
      `;
    }
function buildFeedback({ number, correct, userAnswer, correctAnswer, explanation }) {
      return `
        <div class="question-feedback">
          <h4>Question ${'${number}'}</h4>
          <div class="badge ${'${correct ? "correct" : "incorrect"}'}">
            ${'${correct ? "Correct" : "Incorrect"}'}
          </div>
          <div class="feedback-user ${'${correct ? "correct" : "incorrect"}'}">
            Your answer: ${'${userAnswer}'}
          </div>
          <div class="feedback-answer">
            <strong>Correct answer:</strong> ${'${correctAnswer}'}<br />
            ${'${explanation}'}
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>
